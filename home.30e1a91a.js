!function n(a,s,c){function u(t,e){if(!s[t]){if(!a[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(l)return l(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return u(a[t][1][e]||e)},r,r.exports,n,a,s,c)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function a(e){var i="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(e))return i.get(e);i.set(e,t)}function t(){return s(e,arguments,u(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),c(t,e)})(e)}function s(e,t,i){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return i&&c(r,i.prototype),r}).apply(null,arguments)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){return e.replace(/ /g,"")}var l="STORE20",d=function(){function e(){return h(this,e),n(this,u(e).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(e,a(Error)),e}(),p=function(){function f(e,t){var i=this;h(this,f),this.settings=this.builderApi=e,this.fetch=e.fetch,this.isTestMode=window.self!==window.top||!!this.settings.editor,this.isForPreview=e.isForPreview,this.isRuntimeSite=t.isRuntimeSite,this.config=t,this.localPickupFulfillmentType=3;var o=e.getGlobalColorsWithContrast&&e.getGlobalColorsWithContrast();if(o)this.colors={buttonColor:m(o.buttonBackground),buttonTextColor:m(o.buttonText),backgroundColor:m(o.background),textColor:m(o.text),title:m(o.title)};else{var r=e.getGlobalColors()||{},n=r.accent,a=r.text,s=r.background,c=n&&n[0],u=c&&"rgb(".concat(n[0].join(","),")"),l=c&&e.getTextColorForBackground&&e.getTextColorForBackground(c),d=a&&"rgb(".concat(a.join(","),")"),p=s&&"rgb(".concat(s.join(","),")");this.colors={buttonColor:u,buttonTextColor:l,backgroundColor:p,textColor:d,title:d}}this.data={needToCreateStore:!0,needToSetup:!0},t.isThumbnail?this.data.needToCreateStore=!1:setTimeout(function(){return i.initializeStore()},1)}return function(e,t,i){t&&o(e.prototype,t),i&&o(e,i)}(f,[{key:"reinitializeStore",value:function(){return this.settings.editor.refreshAppMarketData(),this.initializeStore()}},{key:"initializeStore",value:function(){var i=this;this.didGetStoreInfo=!1;var e=this.settings.resolveAppmarketApp(l);return this.storeInitializingPromise=e.then(function(e){if(!e)throw new Error("Store has not been created");i.app=e,i.instanceJwt=e&&e.instance_jwt,i.instanceId=e&&e.instance_id,i.shopApiUrl=i.getUrlByAppName(e.url,"st-shop-api"),i.storeApiUrl=i.getUrlByAppName(e.url,"st-edit-api"),i.shopUrl=i.getUrlByAppName(e.url,"st-shop");var t=window.self!==window.top;if(i.settings.getPageUri("store/product-detail")&&70<=e.setup_status)i.settings.addScriptFromAppmarketApp(l),i.settings.customHeaderButtons.add("kv-ee-cart_button",'<div><i class="fa fa-shopping-cart"></i><span class="kv-ee-cartContent pl-1"></span></div>'),i.settings.customHeaderButtons.forEach("kv-ee-cart_button",function(e){i.cartButton=e,i.cartButton.length=1,i.didCartInitialization||i.initializeCart()}),i.data.needToCreateStore=!1,i.data.needToSetup=!1,i.settings.getAllChildFeatures().forEach(function(e){return e.doStoreDataCall(!0)});else{if(!t)throw new d;i.settings.getAllChildFeatures().forEach(function(e){e.doStoreDataCall(!1),e.renderOverlay&&e.renderOverlay()})}}).then(function(){return Promise.all(i.app?[i.fetchStoreSettings()]:[])}).then(function(){i.didGetStoreInfo=!0,i.settings.getAllChildFeatures().forEach(function(e){return e.onDidGetStoreInfo(!0)})}).catch(function(e){i.didGetStoreInfo=!0;var t=e.constructor===d;i.data.needToCreateStore=!t,i.data.needToSetup=!0,i.settings.getAllChildFeatures().forEach(function(e){return e&&e.onInitError&&e.onInitError(t)}),t||console.warn("CATCHERR",e)}),this.storeInitializingPromise}},{key:"initializeCart",value:function(){if(this.cartButton&&!this.didCartInitialization&&(this.didCartInitialization=!0,window.AMStore=window.AMStore||{q:[],init:function(){window.AMStore.q.push(["init",arguments])},reInit:function(){window.AMStore.q.push(["reInit",arguments])},addToCart:function(){window.AMStore.q.push(["addToCart",arguments])},openShoppingCart:function(){window.AMStore.q.push(["openShoppingCart",arguments])},closeShoppingCart:function(){window.AMStore.q.push(["closeShoppingCart",arguments])}},window.AMStore)){window.AMStore.init({testMode:this.isTestMode,isPublished:!1,instanceJwt:this.instanceJwt,domain:this.shopUrl,openCartAutomatically:!0,language:window._site&&window._site.language,style:this.colors,elements:{amountLabel:this.cartButton.querySelectorAll(".kv-ee-cartContent"),cart:""}});var e=document.querySelector("header .kv-ee-button-cart")||this.cartButton;e&&e.addEventListener("click",function(){window.AMStore.openShoppingCart()})}}},{key:"dispose",value:function(){this.settings.customHeaderButtons.remove("kv-ee-cart_button")}},{key:"afterRenderCustomHeaderButton",value:function(){}},{key:"getUrlByAppName",value:function(e,t){var i=e.match(/^https?:\/\/[^\/]+/i);return 0<i.length?i[0].replace("st-shop",t):null}},{key:"fetchStoreSettings",value:function(){var t=this;return this.fetch("".concat(this.shopApiUrl,"/v1.0/settings?instanceId=").concat(encodeURIComponent(this.instanceId))).then(function(e){return e.json()}).then(function(e){t.data.currencySymbol=e.supportedCurrencies&&e.supportedCurrencies.items[0].symbol,t.data.currencyCode=e.supportedCurrencies&&e.supportedCurrencies.items[0].code,t.builderApi.editor&&!t.config.isThumbnail&&t.builderApi.editor.storeModelProperty("currencySymbol",t.data.currencySymbol,!1,!0)})}},{key:"formatPrice",value:function(e){var t=e.basePrice&&e.basePrice.toFixed(2),i=e.price&&e.price.toFixed(2),o=e.discountPercentage;return o&&!Number.isInteger(o)&&(o=o.toFixed(2)),{productPrice:t,discountedPrice:i,discountPercentage:o}}},{key:"createOrSetupStoreCTA",value:function(e,t){var i=this;this.productListLoader=e.querySelector(".kv-ee-productListLoader"),this.productListRow=e.querySelector(".kv-ee-storeProductRow");var o=e.querySelector(".kv-ee-ui-sortable");if(o&&this.settings.editor&&!this.isForPreview){o.innerHTML+='<div class="kv-edit-selector kv-ee-d-none" data-control-type="remote-list"><div class="kv-edit-selector-buttons"><i class="material-icons kv-editor-button" data-icon-type="settings">settings</i></div></div>';var r=e.querySelector(".kv-edit-selector");o.classList.add("kv-ee-createStoreArea"),o.addEventListener("mouseover",function(e){o.classList.add("kv-hover"),r.classList.remove("kv-ee-d-none")}),o.addEventListener("mouseout",function(e){o.classList.remove("kv-hover"),r.classList.add("kv-ee-d-none")});var n=e.querySelectorAll(".kv-control");n&&n.forEach(function(e,t,i){e.classList.add("kv-ee-d-none")});var a=o.querySelectorAll(".kv-ee-content-image");a&&a.forEach(function(e,t,i){var o=e.getAttribute("data-src-retina");o&&(e.setAttribute("style",'background-image:url("'.concat(o,'")')),e.className="kv-ee-content-image")}),r&&r.addEventListener("click",function(e){i.createStore(t)})}}},{key:"createStore",value:function(e){var o=this,r=0<arguments.length&&void 0!==e?e:function(){o.reinitializeStore()};this.productListLoader&&this.productListLoader.classList.remove("kv-ee-d-none"),this.productListRow&&this.productListRow.classList.add("kv-ee-d-none");function t(){o.settings.editor.showDashboard(l,{onClose:function(){var e=o.data,t=e.needToCreateStore,i=e.needToSetup;r({needToCreateStore:t,needToSetup:i})},onSetupReady:function(){o.data.needToCreateStore=!1,o.data.needToSetup=!1},route:"",queryParams:{ee:1},fullscreen:!0})}this.data.needToCreateStore?this.settings.editor.ensureSavedSite(function(){o.settings.editor.createStore(t)}):t()}},{key:"getDemoData",value:function(){return[{id:"0000",name:this.builderApi.localize("editorTemplates.features.store.demoProductTitle"),title:this.builderApi.localize("editorTemplates.features.store.demoProductTitle"),description:this.builderApi.localize("editorTemplates.features.store.demoProductDescription"),shortDescription:this.builderApi.localize("editorTemplates.features.store.demoProductDescription"),sku:null,stock:null,discountPercentage:10,banner:this.builderApi.localize("editorTemplates.features.store.productBanner1"),image:{value:"https://images.unsplash.com/photo-1494261951946-b0c26b70410c?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=7148f93943d52d36939fd621c24b2d44&auto=format&fit=crop&w=500&q=60"},discountedPrice:63,productPrice:58.33,basePrice:63,price:58.33,deepLink:{title:this.builderApi.localize("editorTemplates.layouts.store.addToCart"),href:this.settings.getPageUri("store/product-detail")+"/"},isTaxable:!0,isPickup:!1,productType:1,images:[{source:"https://images.unsplash.com/photo-1494261951946-b0c26b70410c?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=7148f93943d52d36939fd621c24b2d44&auto=format&fit=crop&w=500&q=60",sizes:null,isStock:!0}],productCategoryIds:null,options:this.getDemoOptionData(),taxExPrice:46.5,taxExFromPrice:50,originalPrice:46.5,originalFromPrice:50},{id:"1111",name:this.builderApi.localize("editorTemplates.features.store.demoProductTitle"),title:this.builderApi.localize("editorTemplates.features.store.demoProductTitle"),description:this.builderApi.localize("editorTemplates.features.store.demoProductDescription"),shortDescription:this.builderApi.localize("editorTemplates.features.store.demoProductDescription"),sku:null,stock:null,discountPercentage:0,banner:null,image:{value:"https://images.unsplash.com/photo-1494498902093-87f291949d17?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=cc45a906096bd3d1a8ff018e75d4f43a&auto=format&fit=crop&w=500&q=60"},images:[{source:"https://images.unsplash.com/photo-1494498902093-87f291949d17?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=cc45a906096bd3d1a8ff018e75d4f43a&auto=format&fit=crop&w=500&q=60",sizes:null,isStock:!0}],deepLink:{title:this.builderApi.localize("editorTemplates.layouts.store.addToCart"),href:this.settings.getPageUri("store/product-detail")+"/"},options:null,discountedPrice:70,productPrice:58.33},{id:"0000",name:this.builderApi.localize("editorTemplates.features.store.demoProductTitle"),title:this.builderApi.localize("editorTemplates.features.store.demoProductTitle"),description:this.builderApi.localize("editorTemplates.features.store.demoProductDescription"),shortDescription:this.builderApi.localize("editorTemplates.features.store.demoProductDescription"),sku:null,stock:null,discountPercentage:null,banner:null,image:{value:"https://images.unsplash.com/photo-1494261951946-b0c26b70410c?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=7148f93943d52d36939fd621c24b2d44&auto=format&fit=crop&w=500&q=60"},images:[{source:"https://images.unsplash.com/photo-1494261951946-b0c26b70410c?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=7148f93943d52d36939fd621c24b2d44&auto=format&fit=crop&w=500&q=60",sizes:null,isStock:!0}],deepLink:{title:this.builderApi.localize("editorTemplates.layouts.store.addToCart"),href:this.settings.getPageUri("store/product-detail")+"/"},options:null,discountedPrice:100,productPrice:100}]}},{key:"getDemoOptionData",value:function(){return[{optionId:"2985",name:this.builderApi.localize("editorTemplates.features.productDemoData.variantName1"),variantType:1,choices:[{choiceId:"12058",inStock:!0,name:"#0000ff",color:"#0000ff",productId:"pv_146412_12058",selected:!1},{choiceId:"12059",inStock:!0,name:"#000",color:"#000",productId:"pv_146412_12059",selected:!1},{choiceId:"12060",inStock:!0,name:"#556b2f",color:"#556b2f",productId:"pv_146412_12060",selected:!1},{choiceId:"12061",inStock:!1,name:"#ffffff",color:"#ffffff",productId:"pv_146412_12061",selected:!1}]},{optionId:"2986",name:this.builderApi.localize("editorTemplates.features.productDemoData.variantName3"),variantType:2,choices:[{choiceId:"12062",inStock:!0,name:this.builderApi.localize("editorTemplates.features.productDemoData.variantName3Choice1"),color:"",productId:"pv_146412_12062",selected:!1,hover:null},{choiceId:"12063",inStock:!0,name:this.builderApi.localize("editorTemplates.features.productDemoData.variantName3Choice2"),color:"",productId:"pv_146412_12063",selected:!1,hover:null},{choiceId:"12064",inStock:!0,name:this.builderApi.localize("editorTemplates.features.productDemoData.variantName3Choice3"),color:"",productId:"pv_146412_12064",selected:!1,hover:null},{choiceId:"12065",inStock:!1,name:this.builderApi.localize("editorTemplates.features.productDemoData.variantName3Choice4"),color:"",productId:"pv_146412_12065",selected:!1,hover:null}]},{optionId:"2987",name:this.builderApi.localize("editorTemplates.features.productDemoData.variantName2"),variantType:3,choices:[{choiceId:"12066",inStock:!0,name:this.builderApi.localize("editorTemplates.features.productDemoData.variantName2Choice1"),color:"",productId:"pv_146412_12066",selected:!1,hover:null},{choiceId:"12067",inStock:!0,name:this.builderApi.localize("editorTemplates.features.productDemoData.variantName2Choice2"),color:"",productId:"pv_146412_12067",selected:!1,hover:null},{choiceId:"12068",inStock:!0,name:this.builderApi.localize("editorTemplates.features.productDemoData.variantName2Choice3"),color:"",productId:"pv_146412_12068",selected:!1,hover:null},{choiceId:"12069",inStock:!0,name:this.builderApi.localize("editorTemplates.features.productDemoData.variantName2Choice4"),color:"",productId:"pv_146412_12069",selected:!1,hover:null}]}]}}]),f}();window.__features=window.__features||{},window.__features["store-core"]=p},{}]},{},[1]),function n(a,s,c){function u(t,e){if(!s[t]){if(!a[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(l)return l(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return u(a[t][1][e]||e)},r,r.exports,n,a,s,c)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,i){"use strict";function a(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var r=function(){function n(e,t,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),s(this,"getRenderModel",function(){return{}}),s(this,"triggerWindowEvent",function(){o.recheckMode&&o.recheckMode()}),this.isRuntimeSite=t.isRuntimeSite,this.builderApi=e,this.currentElementWidth=0,this.checkTimeout=0,this.settings=t;var r=!this.editor&&window.self!==window.top;this.mobileBreakpoint=t.isRuntime?991:1300,this.resizeWaitTimeout=r?0:300,"undefined"!=typeof window&&(window._zoomUpdateEvents=window._zoomUpdateEvents||[],window._zoomUpdateEvents.push(this.triggerWindowEvent))}return function(e,t,i){t&&o(e.prototype,t),i&&o(e,i)}(n,[{key:"registerWindowEvent",value:function(){}},{key:"unregisterWindowEvent",value:function(){if("undefined"!=typeof window&&window._zoomUpdateEvents){var e=window._zoomUpdateEvents.indexOf(this.triggerWindowEvent);0<=e&&window._zoomUpdateEvents.splice(e,1)}}},{key:"dispose",value:function(){this.recheckMode=null,this.unregisterWindowEvent()}},{key:"afterRender",value:function(e,t){var i=this;if(t.parentElement){var o=t.parentElement.parentElement,r=o.querySelectorAll("li");(r||r.length)&&(this.settings.isOnboarding&&o.classList.add("kv-ee-no-animation"),this.settings.isCarouselSection?setTimeout(function(){i.checkMobileMode(o),i.setHeaderHeight(e,t)},300):!this.settings.isOnboarding||t.offsetHeight?(this.checkMobileMode(o),this.setHeaderHeight(e,t),window.addEventListener("resize",function(){i.__resizeTimeout&&window.clearTimeout(i.__resizeTimeout),i.__resizeTimeout=window.setTimeout(function(){i.checkMobileMode(o),i.setHeaderHeight(e,t)},i.resizeWaitTimeout)}),this.recheckMode=this.builderApi.debounce(function(){i.checkMobileMode(o),i.setHeaderHeight(e,t)},300)):setTimeout(function(){i.checkMobileMode(o),i.setHeaderHeight(e,t)},2e3))}}},{key:"setSectionPadding",value:function(e,t){e.nextElementSibling.querySelector(".kv-background").style.top=-t+"px"}},{key:"setHeaderHeightInternal",value:function(e,t){if(0<e.offsetHeight){var i=(e.querySelector(".kv-ee-navigation")||e.querySelector("header")).offsetHeight,o=Math.max(i,e.offsetHeight);t.style.height=o+"px",document.documentElement.style.setProperty("--navigation-height",o+"px")}}},{key:"setHeaderHeight",value:function(e,n){var a=this,t=e.model.isFloatingSection||!1===e.model.cover&&!0===e.model.fixedNavigation;n.parentElement&&t&&!this.settings.isCarouselSection&&function(){for(var e=n.parentElement.parentElement,t=n.querySelectorAll("img"),i=0;i<t.length;i++){var o=t[i].src,r=new window.Image;r.onload=function(){setTimeout(function(){a.setHeaderHeightInternal(n,e)})},r.src=o}a.setHeaderHeightInternal(n,e)}()}},{key:"getNavigationWidth",value:function(e){var t=0;return e.forEach(function(e){t+=e.offsetWidth}),t+40}},{key:"determineContainerWidth",value:function(e,t){var i=e.querySelector("nav")||e,o=e.querySelector('[data-dynamic-navigation-element="logo"]'),r=e.querySelector('[data-dynamic-navigation-element="calltoactionbutton"]'),n=r?r.offsetWidth:0,a=o?o.offsetWidth:0,s=i.offsetWidth-n;return{containerSize:s,logoWidth:a,ctaWidth:n,headerWith:e.offsetWidth,navigationToWide:t+a+n>=e.offsetWidth-20,headerToWide:s+a>=e.offsetWidth}}},{key:"shouldMinimizeMenu",value:function(e){if(window.innerWidth<this.mobileBreakpoint)return!0;var t=e.querySelectorAll(".kv-ee-menu-item-wrapper > li");this.currentElementWidth=this.getNavigationWidth(t);var i=this.determineContainerWidth(e,this.currentElementWidth),o=i.containerSize,r=i.headerToWide,n=i.navigationToWide;return o<100||r||n}},{key:"checkMobileMode",value:function(e){var t=e,i=e.querySelector(".kv-ee-check-mobile");if(i=i||e,window.innerWidth<this.mobileBreakpoint)i.classList.contains("kv-ee-mobile")||i.classList.add("kv-ee-mobile");else{i.classList.remove("kv-ee-mobile");var o=this.shouldMinimizeMenu(t),r=i.classList;o&&r.add("kv-ee-mobile"),o||r.remove("kv-ee-mobile")}}},{key:"updateProperty",value:function(e,t,i){if("layout.section.id"===t){var o=document.querySelector(".kv-page-content"),r=a(o.classList).find(function(e){return e.includes("with-navigation")});r&&(o.classList.remove(r),o.classList.add("kv-ee-with-"+i))}}}]),n}();window.__features=window.__features||{},window.__features.navigation=r},{}]},{},[1]),function n(a,s,c){function u(t,e){if(!s[t]){if(!a[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(l)return l(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return u(a[t][1][e]||e)},r,r.exports,n,a,s,c)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,i){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var n=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.builderApi=e,this.view=t.view,this.localStorageHelper=this.builderApi.localStorageHelper,this.isTestMode=window.self!==window.top||!!e.editor,this.useLocalStorage=this.localStorageHelper.supportsLocalStorage&&!this.isTestMode,this.promoCodeClass="show-promo-code"}return function(e,t,i){t&&r(e.prototype,t),i&&r(e,i)}(i,[{key:"validateForm",value:function(e){var r=this,n={data:[],errors:[]};return e.forEach(function(e){var t=e.getAttribute("id"),i=e.value,o=e.dataset.namelabel;if(!t.includes("g-recaptcha-response"))if("fieldSubscribe"===t&&(i="none"===e.style.display||e.checked),r.isEmpty(i))n.errors.push({key:t,errorMessage:"required"});else{if("fieldEmail"===t){i="string"==typeof i&&i.replace(/\s+/g,"");if(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(i).toLowerCase()))return void n.errors.push({key:t,errorMessage:"invalidEmail"});i=i.replace(/\s+/g,"")}n.data.push({name:o,field:t,value:i,type:r.mapInputType(t)})}}),n}},{key:"showSuccesMessage",value:function(e){var t=e.querySelector(".kv-ee-contact-form-success");t&&t.classList.add("kv-ee-show"),this.setButtonState(e.querySelector(".kv-ee-button.kv-ee-submit"),this.builderApi.localize("editorTemplates.features.subscription.sent")),e.classList.add(this.promoCodeClass)}},{key:"handlePreview",value:function(e){if(!document.querySelector(".kv-ee-preview-form-container")){var t=e.querySelector(".kv-ee-form-container")||e;if(t){var i=document&&document.createElement("div");i.className="preview-form-container",i.innerHTML=this.builderApi.localize("editorTemplates.features.form.preview.message"),t.appendChild(i)}}}},{key:"submitForm",value:function(e,o,t,r,i,n){var a=this,s=5<arguments.length&&void 0!==n?n:{};if(!this.editor&&window.self!==window.top)return this.setButtonState(r.target,this.builderApi.localize("editorTemplates.features.form.preview.button")),void this.handlePreview(o);e.forEach(function(e){e.name&&(e.name=e.name.slice(0,254))});var c=window._site&&window._site.siteId||"",u="/v1.0/contactform";100<=(window._site&&window._site.partnerId||0)&&(u="dev"===i.env.env||"latest"===i.env.env?"https://hostingapi.latest.mywebsitebuilder.com"+u:"qa"===i.env.env?"https://hostingapi.qa.mywebsitebuilder.com"+u:"uat"===i.env.env?"https://hostingapi.uat.mywebsitebuilder.com"+u:"https://hostingapi.mywebsitebuilder.com"+u);var l=o.querySelector("form"),d=o.querySelector(".kv-ee-hidden-form-data").dataset.sectionid,p=!!o.querySelector('[data-type="subscribe"]'),f=!!o.querySelector('[data-type="promotion"]'),h={fields:e,site_id:c,recaptcha_code:t,section_id:d,form_id:d,is_subscription:p||f,contact_list_id:e.contactList};this.setButtonState(r.target,this.builderApi.localize("editorTemplates.features.subscription.sending")),i.fetch(u,{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw new Error(e.statusText);var t=o.querySelector(".kv-ee-contact-form-success"),i=o.closest("section");t&&t.classList.add("kv-ee-show"),a.setButtonState(r.target,a.builderApi.localize("editorTemplates.features.subscription.sent")),l.reset(),s.promoCode?(a.useLocalStorage&&window.localStorage.setItem("showpromo",!0),i.classList.add(a.promoCodeClass)):t.addEventListener("click",function(){t.classList.remove("kv-ee-show")}),i.classList.add("submitted")}).catch(function(){a.setButtonState(r.target,a.builderApi.localize("editorTemplates.features.subscription.sendingError"))})}},{key:"clearErrors",value:function(e,t){var i=this,o=t.querySelector(".kv-ee-error-captcha-container");e&&e.length&&e.forEach(function(e){i.setErrorStyling(t.querySelector("."+e.id+"-container"),!1)}),o&&o.setAttribute("style","display: none")}},{key:"showErrors",value:function(e,t,i){var o=this;if(e&&e.length&&e.forEach(function(e){o.setErrorStyling(t.querySelector("."+e.key+"-container"),!0,e.errorMessage)}),!i){var r=t.querySelector(".kv-ee-error-captcha-container");if(r)r.setAttribute("style","display: block");else{var n=t.querySelector(".kv-ee-captcha-field-wrapper"),a=document.createElement("div");a.className="kv-ee-error-captcha-container",a.innerHTML=this.builderApi.localize("editorTemplates.features.subscription.couldNotVerify"),n.appendChild(a)}}}},{key:"isEmpty",value:function(e){return null==e||"object"===o(e)&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length}},{key:"tryRenderCaptcha",value:function(e,t){var i=this;if(!window.hasCaptcha){window.captchaInstanceQueue=[],window.onCaptchaLoadCallback=function(){window.captchaInstanceQueue.forEach(function(e){i.renderCaptcha(e,t)})};var o=document.createElement("script");o.src="https://www.google.com/recaptcha/api.js?onload=onCaptchaLoadCallback",o.setAttribute("async",!0),o.setAttribute("defer",!0),document.body.appendChild(o),window.hasCaptcha=!0}window.grecaptcha?this.renderCaptcha(e,t):window.captchaInstanceQueue.push(e)}},{key:"renderCaptcha",value:function(e,t){var i=e.querySelector(".kv-ee-captcha-field-wrapper");if(window.grecaptcha&&i&&!i.querySelector("iframe")){i.innerHTML="";var o=window.grecaptcha.render(i,{sitekey:"6Lewpm8UAAAAAKlR7x35yQOUTW6uJ65zbm96VqiL",callback:window.onCaptchaSubmit});t._captchaWidgetId=o}}},{key:"validateCaptcha",value:function(e,t){return window.grecaptcha?window.grecaptcha&&window.grecaptcha.getResponse(e._captchaWidgetId):(this.tryRenderCaptcha(t,e),!1)}},{key:"setErrorStyling",value:function(e,t,i){if(e){var o=e.querySelector("input")||e.querySelector("textarea"),r=e.querySelector(".kv-ee-error-container");o&&r&&(t&&o?(o.style.cssText="border: 3px solid #F44336; border-radius: .25rem; box-sizing: border-box; outline: 0;",r.innerHTML=this.builderApi.localize("editorTemplates.features.subscription.".concat(i||"required"))):(o.style.cssText="",r.innerHTML=""))}}},{key:"setButtonState",value:function(e,t){e&&(e.innerHTML=t)}},{key:"mapInputType",value:function(e){var t=1;return"fieldEmail"===e&&(t=3),"fieldDate"===e&&(t=4),"fieldPhone"===e&&(t=6),"fieldFirstName"!==e&&"fieldlastName"!==e||(t=8),t}}]),i}();window.__features=window.__features||{},window.__features["form-core"]=n},{}]},{},[1]),function n(a,s,c){function u(t,e){if(!s[t]){if(!a[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(l)return l(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return u(a[t][1][e]||e)},r,r.exports,n,a,s,c)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,i){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=function(){function o(e,t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.builderApi=e,this.formCore=i["form-core"],this.isForPreview=e.isForPreview,this.isRuntimeSite=!e.editor,this.fetch=e.fetch,this.builderApi.apiUrl&&(this.contactsApi=this.builderApi.apiUrl("v2.0/","contacts"))}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(o,[{key:"initializeForSection",value:function(){}},{key:"updateProperty",value:function(){}},{key:"afterRender",value:function(e,t){var i=this,o=t.querySelector('form [data-type="button"]'),r=e.controller.parentController;this.isForPreview||this.isRuntimeSite&&o&&(o.removeAttribute("href"),o.dataset.href="",o.addEventListener("click",function(e){i.handleFormSubmission(e,r,t)}),t.addEventListener("click",function(){i.formCore.tryRenderCaptcha(t,r)}))}},{key:"fetchContactLists",value:function(e){return this.fetch("".concat(e).concat(this.builderApi.getSiteId(),"/lists?exclude_system_lists=true&exclude_all_contacts=true")).then(function(e){return e.json()})}},{key:"onLoadListIds",value:function(){var t=this;return this.builderApi.getSiteId()?this.contactsApi&&!this.contactsListsLoaded?this.fetchContactLists(this.contactsApi).then(function(e){return t.contactsListsLoaded=!0,[{label:t.builderApi.localize("editorTemplates.features.subscription.allContacts"),value:""}].concat(r(e.map(function(e){return{label:e.name,value:e.id}})))}):void 0:null}},{key:"handleFormSubmission",value:function(e,t,i){if(e.preventDefault(),"localhost"!==window.location.hostname){var o=i.querySelectorAll("input, textarea");this.formCore.clearErrors(o,i);var r=this.formCore.validateForm(o),n=r.data,a=r.errors,s=this.formCore.validateCaptcha(t,i);0<a.length||!s?this.formCore.showErrors(a,i,s):this.formCore.submitForm(n,i,s,e,this.builderApi,t.model.binding)}}}]),o}();window.__features=window.__features||{},window.__features.subscription=o},{}]},{},[1]),function n(a,s,c){function u(t,e){if(!s[t]){if(!a[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(l)return l(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return u(a[t][1][e]||e)},r,r.exports,n,a,s,c)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o=function(){function o(e,t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n(this,"getUniqueId",function(){return i.builderApi.getPageUri()+"-"+i.view.id}),n(this,"hasShownPopover",function(){return!!i.useLocalStorage&&window.localStorage.getItem(i.getUniqueId())}),this.builderApi=e,this.model=e.controller.model,this.editMode=!!e.editor,this.viewerMode=!this.editMode,this.view=t.view,this.isTestMode=window.self!==window.top||!!e.editor,this.viewerMode&&this.model.showPopover&&(this.inPopoverMode=!0),this.editorContext=e.controller.editorContext,this.editMode&&this.setTooltip(),this.localStorageHelper=this.builderApi.localStorageHelper,this.useLocalStorage=this.localStorageHelper.supportsLocalStorage&&!this.isTestMode}return function(e,t,i){t&&r(e.prototype,t),i&&r(e,i)}(o,[{key:"dispose",value:function(){}},{key:"getDisplayTime",value:function(e){return 1e3*parseInt(e.popoverTiming)||0}},{key:"rerender",value:function(){this.view.requestRender()}},{key:"setTooltip",value:function(){void 0===this.model.popoverTiming&&(this.model.popoverTiming=10);var e="";this.model.showPopover&&(e="leaveSite"===this.model.popoverDisplay?this.builderApi.localize("editorTemplates.features.popover.tooltip.leaveSite"):0<parseInt(this.model.popoverTiming)?this.builderApi.localize("editorTemplates.features.popover.tooltip.afterX").replace("{time}",this.model.popoverTiming):this.builderApi.localize("editorTemplates.features.popover.tooltip.immediately")),this.editorContext.setSectionToolTip(this.builderApi.controller.parentController,e)}},{key:"showModal",value:function(t){var i=this;this.builderApi.showModal({fullScreen:!0,content:t,closeButton:t.querySelector(".kv-ee-feature-modal-close-button"),onClose:this.model.promoCode?function(e){i.nextSectionElement.parentElement.insertBefore(t,i.nextSectionElement),t.classList.remove("kv-ee-popover-mode")}:null}),this.mouseLeaveListener&&document.body.removeEventListener("mouseleave",this.mouseLeaveListener),this.localStorageHelper.supportsLocalStorage&&!this.isTestMode&&window.localStorage.setItem(this.getUniqueId(),!0)}},{key:"initializeForSection",value:function(e,t){var i=this;if(this.inPopoverMode){var o=e.domElement.parentElement.parentElement;if(this.nextSectionElement=o.nextElementSibling,this.hasShownPopover())this.hasShownPopover()&&t.promoCode?this.useLocalStorage&&window.localStorage.getItem("showpromo")?this.view.features.subscription.formCore.showSuccesMessage(o):o.style.display="none":this.hasShownPopover()&&(o.style.display="none");else if(o.classList.add("kv-ee-popover-mode"),"leaveSite"===t.popoverDisplay)setTimeout(function(){i.mouseLeaveListener=function(){return i.showModal(o)},i.listener=document.body.addEventListener("mouseleave",i.mouseLeaveListener)},3e3);else{var r=this.getDisplayTime(t);setTimeout(function(){i.showModal(o)},r)}}}},{key:"updateProperty",value:function(){return this.setTooltip(),!1}},{key:"getRenderModel",value:function(){}},{key:"afterRender",value:function(){}}]),o}();window.__features=window.__features||{},window.__features.popover=o},{}]},{},[1]),window._featureSettings={"store-core":{settings:{isGlobal:!0}},navigation:{settings:{}},"form-core":{settings:{}},translations:{"editorTemplates.features.subscription.couldNotVerify":"Could not verify if you were human","editorTemplates.features.subscription.sent":"Sent!","editorTemplates.features.subscription.sending":"Sending ...","editorTemplates.features.subscription.sendingError":"Error sending form","editorTemplates.features.subscription.required":"This field is required.","editorTemplates.features.subscription.invalidEmail":"Invalid format","editorTemplates.features.subscription.subscribe":"By submitting your information, you are granting us permission to email you. You may unsubscribe at any time.","editorTemplates.features.subscription.subscribeToggle":"By checking this box and submitting your information, you are granting us permission to email you. You may unsubscribe at any time.","editorTemplates.features.subscription.allContacts":"All contacts","editorTemplates.features.form.preview.button":"Not sent!","editorTemplates.features.form.preview.message":"Forms cannot be sent while in preview mode"},subscription:{settings:{dependingGlobalFeatures:["form-core"]}},popover:{settings:{}}};